# use bearstech stretch 
FROM bearstech/debian:stretch

ENV DEBIAN_FRONTEND noninteractive

ENV SOLR_VERSION=3.6.2
ENV SOLR=apache-solr-$SOLR_VERSION

# we need openjdk
RUN apt-get update && apt-get install -y openjdk-8-jre-headless curl \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

COPY install.sh /install.sh
RUN /bin/bash /install.sh && rm /install.sh

# Run Apache Solr
ENV SOLR_PORT=8983
EXPOSE $SOLR_PORT
WORKDIR /opt/solr
CMD ["/bin/bash", "-c", "java -jar start.jar","-Djetty.port=$SOLR_PORT"]
